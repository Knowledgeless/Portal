{% extends "base.html" %}
{% block title %}Admin - Search Users{% endblock %}
{% block content %}
<div class="container py-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3>User Search</h3>
    <div>Signed in as <strong>{{ request.user.username }}</strong></div>
  </div>

  <div class="card mb-4">
    <div class="card-body">
      <form method="get" class="d-flex gap-2">
        <input type="search" name="q" class="form-control" placeholder="Search username, email or phone" value="{{ q }}">
        <button class="btn btn-primary">Search</button>
      </form>
    </div>
  </div>

  {% if results %}
    <div class="list-group">
      {% for s in results %}
        <div class="list-group-item d-flex justify-content-between align-items-center">
          <div>
            <div class="fw-semibold">{{ s.user.username }} — {{ s.full_name }}</div>
            <div class="small text-muted">{{ s.user.email }} • {{ s.phone }}</div>
          </div>
          <div class="d-flex gap-2">
            <a href="{% url 'app:admin_profile' s.user.username %}" class="btn btn-sm btn-outline-primary" title="View / Edit">
              <i class="fa-solid fa-eye"></i>
            </a>
            <a href="{% url 'app:admin_profile' s.user.username %}?change_password=1" class="btn btn-sm btn-outline-secondary" title="Change Password">
              <i class="fa-solid fa-key"></i>
            </a>
          </div>
        </div>
      {% endfor %}
    </div>
  {% elif q %}
    <div class="alert alert-secondary">No results for "{{ q }}"</div>
  {% endif %}
</div>
{% endblock %}
