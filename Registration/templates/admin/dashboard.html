{% extends "base.html" %}
{% block title %}Admin Dashboard{% endblock %}
{% block content %}
<div class="container py-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3>Admin Dashboard</h3>
    <div>Welcome Back <strong class="" style="text-transform:uppercase; color:#00ffea">{{ request.user.username }}</strong>..!</div>
  </div>

    <div class="card mb-4" style="background: transparent; ">
        <div class="card-body p-0">
            <form method="get" action="{% url 'app:admin_search' %}" class="d-flex gap-2 p-0 ">
            <div class="position-relative" style="width: 100%;">
            <input type="search" name="q" class="form-control" placeholder="Search username, email or phone" value="{{ q }}" style="padding: 5px 20px !important; border-radius: 50px; border: 1px solid rgba(255, 255, 255, 0.2); background: transparent; color: white; padding-right: 5rem; backdrop-filter: blur(10px);">
            <button type="submit" class="btn btn-warning" style="position: absolute; right: 0.5rem; top: 50%; transform: translateY(-50%); border: none; background: none; color: white; cursor: pointer;">
            <i class="fa-solid fa-search"></i>
            </button>
            </div>
            </form>
            <style>
            input::placeholder {
            color: whitesmoke;
            }
            </style>
        </div>
    </div>

  <div class="row mb-3">
    <div class="col-md-4"><div class="card p-3">Total users: <strong>{{ total_users }}</strong></div></div>
    <div class="col-md-4"><div class="card p-3">Total students: <strong>{{ total_students }}</strong></div></div>
    <div class="col-md-4"><div class="card p-3">Year registrations: <strong>{{ total_registered }}</strong></div></div>
  </div>

  {% if results %}
    <div class="list-group">
      {% for s in results %}
        <div class="list-group-item d-flex justify-content-between align-items-center">
          <div>
            <div class="fw-semibold">{{ s.user.username }} — {{ s.full_name }}</div>
            <div class="small text-muted">{{ s.user.email }} • {{ s.phone }}</div>
          </div>
          <div class="d-flex gap-2">
            <a href="{% url 'app:admin_profile' s.user.username %}" class="btn btn-sm btn-outline-primary" title="View / Edit">
              <i class="fa-solid fa-eye"></i>
            </a>
            <a href="{% url 'app:admin_profile' s.user.username %}?change_password=1" class="btn btn-sm btn-outline-secondary" title="Change Password">
              <i class="fa-solid fa-key"></i>
            </a>
          </div>
        </div>
      {% endfor %}
    </div>
  {% elif q %}
    <div class="alert alert-secondary">No results for "{{ q }}"</div>
  {% endif %}
</div>
{% endblock %}
